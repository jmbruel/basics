language: java
before_install:
- sudo apt-get update -qq
- sudo apt-get install -qq graphviz
script:
- ls -alF
- java -jar plantuml.jar *.plantuml -o output
- ls -alF

# Following generated by
#
# gem install travis
# travis login --pro
# travis encrypt -r jmbruel/basics GH_TOKEN=<token generated on gitHub> --add env.global
# In Github -> profile -> application -> generate token 
env:
  global:
    secure: MrfRtypUsbUrF5IpX0iBeIquGy4vLOKP55M9ooo2L8elvX4HGjkNuFo6cbZ0WxszIi69emk7MevhTn/IBgKT9vGTg5OyR9HZsxKm1ruhKFw+EHNj7M/Hx+FffXyOn6L/VApZRmqxY1znpgJgsScImGB9qrwf9QDPLQXhBhrVV/o=

# if everything OK, then deploy on the web
after_success: 
#- bash update.sh
- echo -e "Starting to update gitHub\n"
- git config --global user.email "jbruel#travis@gmail.com"
- git config --global user.name "Jean-Michel Bruel"
- git config --global push.default simple
- git clone --quiet https://${GH_TOKEN}@github.com/jmbruel/basics.git travis > /dev/null

#go into directory and copy data we're interested in to that directory
- cd 
- cd jmbruel/travis/output
- pwd
- cp jmbruel/basics/output/*.png .
- ls -al 
#- git remote set-url origin https://${GH_TOKEN}@github.com/jmbruel/basics.git
- git add *.png
- git commit -m "Travis build $TRAVIS_BUILD_NUMBER pushed to basics repository -- [skip ci]"
- git push -fq origin master  > /dev/null
- echo -e "Done magic with output\n"


